<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Renata Diaz">

<title>Appendix S1 - Plot-level analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="s1_plot_level_files/libs/clipboard/clipboard.min.js"></script>
<script src="s1_plot_level_files/libs/quarto-html/quarto.js"></script>
<script src="s1_plot_level_files/libs/quarto-html/popper.min.js"></script>
<script src="s1_plot_level_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="s1_plot_level_files/libs/quarto-html/anchor.min.js"></script>
<link href="s1_plot_level_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="s1_plot_level_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="s1_plot_level_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="s1_plot_level_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="s1_plot_level_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix S1 - Plot-level analysis</h1>
<p class="subtitle lead">Supplemental information for Diaz and Ernest, “Maintenance of community function through compensation breaks down over time in a desert rodent community”. In review at Ecology.</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Renata Diaz </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div style="page-break-after: always;"></div>
<section id="explanation" class="level1">
<h1>Explanation</h1>
<p>In order to calculate energetic compensation and the total energy ratio, we require an estimate for the baseline values of total energy use, kangaroo rat energy use, and small granivore energy use on control plots. Estimating these baselines requires aggregating over between-plot variability among the control plots. For consistency, in the main analysis, we also aggregate across the exclosure plots and focus on treatment-level means throughout. Here, we explore the effect of between-plot variability on our analyses, to the extent possible. We used treatment-level means across control plots to calculate energetic compensation and the total energy ratio, but calculated these quantities separately for each exclosure plot, and conducted analyses including a random effect of plot. We also conducted analyses of <em>Dipodomys</em> and <em>C. baileyi</em> proportional energy use using plot-level data, again including plot as a random effect. Results were qualitatively the same as using treatment-level means.</p>
<!-- # Calculations of compensation and the total energy ratio -->
<div style="page-break-after: always;"></div>
</section>
<section id="compensation" class="level1">
<h1>Compensation</h1>
<section id="model-specification-and-selection" class="level2">
<h2 class="anchored" data-anchor-id="model-specification-and-selection">Model specification and selection</h2>
<p>We fit linear mixed-effects models (using the <code>lme</code> function in the R package <code>nlme</code>; Pinheiro et al.&nbsp;2021) of the form <code>compensation ~ time period</code> with a random effect of plot and temporal autocorrelation structure to account for autocorrelation between monthly census periods within each time period. We compared these to models without the autocorrelation structure, without the random effect, and without the term for time period. The best-fitting model included terms for time period, random effect of plot, and autocorrelation.</p>
<section id="table-s1.-model-comparison-for-compensation." class="level3">
<h3 class="anchored" data-anchor-id="table-s1.-model-comparison-for-compensation.">Table S1. Model comparison for compensation.</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                                              Model.specification      AIC
1 intercept + timeperiod + plot (random effect) + autocorrelation 1360.207
2                   intercept + timeperiod + plot (random effect) 1680.916
3                        intercept + timeperiod + autocorrelation 1409.830
4              intercept + plot (random effect) + autocorrelation 1408.362
5                                intercept + plot (random effect) 1879.126
6                                                       intercept 2036.371</code></pre>
</div>
</div>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="table-s2.-coefficients-from-linear-mixed-effects-model-for-compensation" class="level3">
<h3 class="anchored" data-anchor-id="table-s2.-coefficients-from-linear-mixed-effects-model-for-compensation">Table S2. Coefficients from linear mixed-effects model for compensation</h3>
<p>Note that “oera” is the variable name for the term for time period in these analyses.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                  Value  Std.Error   DF   t-value      p-value
(Intercept)  0.34512822 0.10483540 1362  3.292096 1.019923e-03
oera.L       0.06530904 0.03733127 1362  1.749446 8.043916e-02
oera.Q      -0.28458295 0.03410634 1362 -8.343990 1.740811e-16</code></pre>
</div>
</div>
</section>
<section id="table-s3.-estimates-from-linear-mixed-effects-model-for-compensation" class="level3">
<h3 class="anchored" data-anchor-id="table-s3.-estimates-from-linear-mixed-effects-model-for-compensation">Table S3. Estimates from linear mixed-effects model for compensation</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  Timeperiod    emmean        SE df    lower.CL  upper.CL
1  1988-1997 0.1827673 0.1091842  3 -0.16470550 0.5302400
2  1997-2010 0.5774892 0.1078860  3  0.23414785 0.9208306
3  2010-2020 0.2751282 0.1093969  3 -0.07302152 0.6232779</code></pre>
</div>
</div>
</section>
<section id="table-s4.-contrasts-from-linear-mixed-effects-model-for-compensation" class="level3">
<h3 class="anchored" data-anchor-id="table-s4.-contrasts-from-linear-mixed-effects-model-for-compensation">Table S4. Contrasts from linear mixed-effects model for compensation</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>             Comparison    estimate         SE   df   t.ratio p.value
1 1988-1997 - 1997-2010 -0.39472197 0.04918452 1362 -8.025330  0.0000
2 1988-1997 - 2010-2020 -0.09236093 0.05279438 1362 -1.749446  0.1873
3 1997-2010 - 2010-2020  0.30236105 0.04964105 1362  6.090948  0.0000</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p>Bates, Douglas, Martin Maechler, Ben Bolker, Steve Walker (2015). <em>Fitting Linear Mixed-Effects Models Using lme4.</em> Journal of Statistical Software, 67(1), 1-48. doi:10.18637/jss.v067.i01.</p>
<p>Lenth, Russell V. (2021). emmeans: <em>Estimated Marginal Means, aka Least-Squares Means.</em> R package version 1.7.0. &lt;URL: https://CRAN.R-project.org/package=emmeans&gt;</p>
<p>Pinheiro J, Bates D, DebRoy S, Sarkar D, R Core Team (2021). <em>nlme: Linear and Nonlinear Mixed Effects Models</em>. R package version 3.1-153, &lt;URL: https://CRAN.R-project.org/package=nlme&gt;.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>